<%- include('partials/header') %>


<h1>URL Shortener</h1>

<div class="form-container">
    <form action="/shorturl" method="post" enctype="multipart/form-data">
        <input type="url" name="originalUrl" placeholder="Enter original URL" required>
        <input type="file" name="picture">
        <button type="submit">Shorten URL</button>
    </form>
</div>

<% if (urls.length > 0) { %>
<table>
    <thead>
        <tr>
            <th>Picture</th>
            <th>Short URL</th>
            <th>Original URL</th>
            <th>Visit Count</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        <% urls.forEach(url => { %>
            <tr>
                <td data-label="Picture">
                    <% if (url.pictureUrl) { %>
                        <img src="<%= url.pictureUrl %>" alt="picture" height="50" width="50">
                    <% } else { %>
                        <em>No Image</em>
                    <% } %>
                </td>
                <td data-label="Short URL">
                    <a href="/<%= url.shortUrl %>" target="_blank">
                        <%= req.headers.host %>/<%= url.shortUrl %>
                    </a>
                </td>
                <td data-label="Original URL"><%= url.originalUrl %></td>
                <td data-label="Visit Count"><%= url.visitCount %></td>
                <td data-label="Action">
                    <form action="/<%= url._id %>" method="post">
                        <button type="submit" class="delete-btn">Delete</button>
                    </form>
                </td>
            </tr>
        <% }) %>
    </tbody>
</table>
<% } %>

<%- include('partials/footer') %>
